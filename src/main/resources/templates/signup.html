<!DOCTYPE html>
<html lang="en" th:replace="~{layout/layout :: layout(~{::title}, ~{::body})}">
<head>
    <title>Sign up</title>
</head>
<body>

<nav class="navbar navbar-light bg-light justify-content-center">
    <a class="btn btn-primary" th:href="@{/auth/signin}">Sign in</a>
</nav>

<div class="container">
    <div class="d-flex justify-content-center mt-5">
        <form class="row g-3"
              method="post"
              style="width: 22rem"
              th:action="@{/auth/signup}"
              th:object="${request}"
              th:with="usernameHasErrors = ${#fields.hasErrors('username')},
              passwordHasErrors = ${#fields.hasErrors('password')},
              confirmPasswordHasErrors = ${#fields.hasErrors('confirmPassword') || #fields.hasGlobalErrors()}">

            <h3 class="text-center mb-4">Sign up</h3>

            <input aria-label="Username"
                   autofocus
                   id="username"
                   name="username"
                   placeholder="Username"
                   required
                   th:class="${'form-control' + (usernameHasErrors ? ' is-invalid' : '')}"
                   th:value="*{username}"
                   type="text">
            <div class="invalid-feedback"
                 th:errors="*{username}"
                 th:if="${usernameHasErrors}"></div>

            <input aria-label="Password"
                   id="password"
                   name="password"
                   placeholder="Password"
                   required
                   th:class="${'form-control' + (passwordHasErrors ? ' is-invalid' : '')}"
                   th:value="*{password}"
                   type="password">
            <div class="invalid-feedback"
                 th:errors="*{password}"
                 th:if="${passwordHasErrors}"></div>

            <input aria-label="Confirm password"
                   id="confirmPassword"
                   name="confirmPassword"
                   placeholder="Confirm password"
                   required
                   th:class="${'form-control' + (confirmPasswordHasErrors ? ' is-invalid' : '')}"
                   th:value="*{confirmPassword}"
                   type="password">
            <div class="invalid-feedback"
                 th:errors="*{confirmPassword}"
                 th:if="${confirmPasswordHasErrors}"></div>

            <div class="d-block invalid-feedback"
                 th:each="globalError : ${#fields.globalErrors()}"
                 th:text="${globalError}"></div>
            <div class="d-block invalid-feedback"
                 th:if="${error}"
                 th:text="${error}"></div>

            <input class="form-control btn btn-primary"
                   type="submit"
                   value="Sign up">
        </form>
    </div>
</div>
</body>
</html>